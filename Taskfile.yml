version: '3'

tasks:
  start-app-containers:
    cmds:
      - docker-compose up -d
  server-one:
    dir: ./cmd/server_one
    cmds:
      - go run main.go
    silent: true
  server-two:
    dir: ./cmd/server_two
    cmds:
      - go run main.go
    silent: true
  proxy-server:
    dir: ./cmd/proxy_server
    cmds:
      - go run main.go
    silent: true
  doc-server:
    cmds:
      - godoc -http=:6060
  token-bucket-refill:
    dir: ./cmd/token_bucket_refiller
    cmds:
      - go run main.go
    silent: true


  start-servers:
    deps: [doc-server, server-one, server-two, proxy-server, token-bucket-refill]
